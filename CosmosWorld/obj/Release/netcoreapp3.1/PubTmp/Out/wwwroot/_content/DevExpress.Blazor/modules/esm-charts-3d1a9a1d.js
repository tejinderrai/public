import"./esm-chunk-d81494b9.js";import{ensureElement as e,elementHasCssClass as t,changeDom as n,calculateStyles as o,getCurrentStyle as i,attachEventToElement as r,toggleCssClass as u}from"./esm-dom-utils-88a2c0cb.js";import"./esm-chunk-13e2cf5f.js";import{parseTranslateInfo as c,translatePosition as l}from"./esm-popup-utils-20f67cc2.js";const s=[];function a(e){const t=s.indexOf(e);return t>-1?s[t+1]:Promise.reject()}function d(e,t,n){return-1===s.indexOf(e)?function(e,t,n){const o=new Promise((function(o){import("./esm-devexpress.viz-5d8db4bd.js").then((function(i){const r=f(i,e.querySelector(".dx-chart"),t,o);n(t,r)}))}));return s.push(e),s.push(o),o}(e,t,n):a(e).then((function(e){return new Promise((function(o){n(t,(function(t){t.animation={enabled:!1},e.option(t),o("ok")}))}))})).catch(window.console.error)}function f(e,t,n,o){const i=n.series.map(e=>e.category)[0],r="pie"===i||"donut"===i?e.viz.dxPieChart:e.viz.dxChart;return function(e){e.type=i,o(new r(t,e))}}function p(e,t,n,o,i,u){i.forEach((function(i){r(e,i,(function(e){const i=m(t,n,o);i&&u(i)}))}))}function m(e,t,n){let o=e.getSeriesByPos(t);return n&&(o=o.getPoints().filter((function(e){return e.tag===n}))[0]),o}function h(e,n,o,i,r){if(!e)return;const u=m(n,o,i);if(!u)return;const c=e.querySelector(".dx-chart-legend-icon");if(c){const e=u.getColor();t(c,"dx-chart-def-icon")&&(c.style.backgroundColor=e),c.style.color=e}r||(p(e,n,o,i,["mouseover","focusin"],(function(e){e.hover(n.option("legend.hoverMode"))})),p(e,n,o,i,["mouseout","focusout"],(function(e){e.clearHover()})))}function g(t,n){let i=null,r=null,u=null;const c={},l={};let s=-1,a=null;function d(t,r){const u=t.tag;clearTimeout(s),s=setTimeout((function(){i=u,n.invokeMethodAsync("GetTooltipTemplate",[u]).then((function(t){return t=e(t),l[u]=t,function(e,t){return o((function(){const n=e.getBoundingClientRect();return`<div id="_${t}" class="dx-chart-tooltip-wrapper" style="width: ${n.width}px; height: ${n.height}px;"></div>`}))}(t,u)})).then((function(e){c[u]=e,i===u&&(a=t,r())})).catch((function(e){window.console.error(e)}))}),100)}function f(e){var t;r=null,u&&(t=u,void import("./esm-popup-utils-20f67cc2.js").then((function(e){e.hide(t)})),u=null)}t.tooltip={enabled:!0,paddingLeftRight:0,paddingTopBottom:0,customizeTooltip:function(e){return c[e.point.tag]?{html:c[e.point.tag]}:(d(e.point,(function(){e.point.showTooltip()})),{text:""})}},t.onTooltipHidden=function(e){f()},t.onTooltipShown=function(e){f();let t=e.target;if(!t){if(t=a,!t)return;a=null}const n=t.tag;c[n]&&(r=n,import("./esm-popup-utils-20f67cc2.js").then((function(e){r===n&&(u=l[n],e.show(u,document.getElementById("_"+n),"top-sides left-sides"))})))}}function v(e,t){return e._valueAxes.filter((function(e){return e.pane===t.name}))[0]}const b={init:function(e,t,r){return d(e,t,(function(t,s){!function(e,t){if(e.palette)return t(e.palette);const r=["bg-primary","bg-success","bg-danger","bg-warning","bg-info","bg-secondary"],u=document.createElement("DIV");u.className="d-none position-absolute";for(let e=0;e<r.length;e++){const t=document.createElement("DIV");t.className=r[e],u.appendChild(t)}n((function(){document.body.appendChild(u),o((function(){const e=[];for(let t=0;t<u.childNodes.length;t++)e.push(i(u.childNodes[t]).backgroundColor);n((function(){document.body.removeChild(u),t(e)}))}))}))}(t,(function(i){let a=!1;const d={tooltip:t.tooltip,dataSource:t.dataSource,palette:i,rotated:t.rotated,resolveLabelOverlapping:t.labelOverlap,size:t.size,commonAxisSettings:{label:{overlappingBehavior:"rotate",rotationAngle:45}},dataPrepareSettings:{sortingMethod:!1},commonSeriesSettings:{argumentField:"argument",valueField:"value",openValueField:"openValue",highValueField:"highValue",lowValueField:"lowValue",closeValueField:"closeValue",rangeValue1Field:"startValue",rangeValue2Field:"endValue",sizeField:"size",type:"bar"},adaptiveLayout:{width:0,height:0},seriesTemplate:{nameField:"seriesId",customizeSeries:function(e){return t.series.filter((function(t){return t.seriesId===e}))[0]}},customizeLabel:function(e){return e.data.pointLabel},customizePoint:function(e){return e.data.pointAppearance},legend:{visible:!1,hoverMode:(t.legend?t.legend.hoverMode:null)||"includepoints"},onDrawn:function(t){a||(a=!0,function(e,t){const n=e.querySelectorAll(".dx-chart-legend-item");for(let e=0;e<n.length;e++){const o=n[e],i=+o.getAttribute("data-series"),r=o.getAttribute("data-point");h(o,t,i,r,!0)}}(e,t.component),function(e,t){function i(e,t){n((function(){l(e,0,t)}))}function r(e,t,n,o,r){i(e,o),e.marginTop="-"+r+"px",i(t,-r),i(n,-r)}t.panes&&0!==t.panes.filter((function(e){return"default"!==e.name})).length&&o((function(){let o=0;for(let n=t.panes.length-2;n>=0;n--){const u=t.panes[n],l=e.querySelector(".dx-chart-legend[data-pane='"+u.name+"']");if(l){const e=l.offsetHeight+o,n=v(t,u),s=n._axisGroup.element,a=n._axisGridGroup.element,d=a.getBoundingClientRect().bottom+10,f=c(l.style),p=l.getBoundingClientRect().top-f.top;t.series.filter((function(e){return e.pane===u.name})).forEach((function(t){i(t._group.element.style,-e)})),r(l.style,s.style,a.style,d-p,e),o+=e}}n((function(){t.option("margin",{top:o})}))}))}(e,t.component),u(e,"dx-loading",!1))},valueAxis:t.valueAxis,panes:t.panes,argumentAxis:t.argumentAxis,pathModified:!0};t.hasTooltipCustomization?g(d,r):d.tooltip=t.tooltip,s(d)}))})).then((function(){return Promise.resolve("ok")})).catch((function(e){window.console.error(e)}))},dispose:function(t){return function(t,n){t=e(t);const o=s.indexOf(t);return o>-1&&(s[o+1].then((function(e){e.dispose()})),s[o+1]=null,n&&(s[o]=null)),Promise.resolve()}(t,!0)},onSeriesLegendElementReceived:function(e,t,n,o){return a(e).then((function(e){return h(o,e,t,n),Promise.resolve()})).catch((function(e){window.console.error(e)}))},onSeriesVisibleChanged:function(e,t,n,o){return a(e).then((function(e){const i=m(e,t,n);return o?i.show():i.hide(),Promise.resolve()})).catch((function(e){window.console.error(e)}))},destroyTooltips:function(){return new Promise((function(e,t){const n=Array.prototype.slice.call(document.querySelectorAll(".dxc-tooltip"));for(let e=0;e<n.length;e++){const t=n[e];t.parentNode.removeChild(t)}e(!0)}))}};export default b;export{f as createWidgetBuilder};
