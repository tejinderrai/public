DxBlazorInternal.define("cjs-roller-14fd9fbb.js",(function(t,e,i){t("./cjs-chunk-c5286524.js");var n=t("./cjs-dom-utils-c4472fdd.js"),s=t("./cjs-chunk-8bdf5a55.js"),r=t("./cjs-chunk-62a77fef.js");function o(t){return t*(2-t)}function a(t){return t/Math.abs(t)}function l(t,e,i,n){var s=null;function r(t){return s?s(t):0}function o(){s=null}function a(t,n,r){s=function(t,e,i,n,s){var r=e+i,o=0;return function(a,l){if(l)return l(t-o,a,n(a/r));a>=r&&s&&s();var u=t*n((Math.min(a,r)-e)/i)-o;return o+=u,u}}(n+t,r,e,i,o)}function l(t){null===s?(a(t.value,0,t.timeStamp),n(r)):s(t.timeStamp,(function(e,i){return a(t.value,e,i)}))}return t.subscribe(l),function(){s=null,t.unsubscribe(l)}}function u(t,e,i,s,o){var u,c,h,m,p,f=function(t,e,i){var n=new r.Emitter;return t.addEventListener(e,(function(t){t.preventDefault();var e=i(t);0===e||isNaN(e)||n.emit({value:e,timeStamp:t.timeStamp})}),!1),n}(t,"wheel",(function(t){return a(t.deltaY)*e}));l((u=f,c=30,h=new r.Emitter,m=0,p=1,u.subscribe((function(t){(0===m||t.timeStamp>=m||a(t.value)!==p)&&(m=t.timeStamp+c,p=a(t.value),h.emit(t))})),h),300,i,(function(t){o(new Promise((function(e,i){!function t(e,i){n.RequestAnimationFrame((function(n){var r=e(n);0!==r?(s(r),t(e,i)):i()}))}(t,e)})))}))}function c(t,e,i){var n=i(t);return n?e||n.visible.value?n:c(n,e,i):null}function h(t,e){var i,n,s=-1===e?"prevItem":"nextItem";return t[s]?t[s]:t[s]=(n=t.value+e*(i=t.collection).delta,-1===e&&-1!==i.min&&n<i.min?new p(i,i.max,!1,null,t):1===e&&-1!==i.max&&n>i.max?new p(i,i.min,!1,t,null):new p(i,n,!1))}var m=function(t,e,i,n,s,o){var a=this;this.collection=t,this.prevItem=s,this.nextItem=o,this.value=e,this.visible=i||new r.Subject(!0),this.selected=new r.Subject(!!n),s&&(s.nextItem=this),o&&(o.prevItem=this),this.displayText=new r.Subject(e);var l=this.collection.selectedItem;this.selected.subscribe((function(t){t&&(l.value&&l.value.selected.update(!1),l.update(a))})),this.visible.subscribe((function(t){!t&&a.selected.value&&a.getPrevious().selected.update(!0),a.collection.visibleItemsChanged.emit()}),!0)};m.prototype.getPrevious=function(t){return c(this,t,(function(t){return t.prevItem}))},m.prototype.getNext=function(t){return c(this,t,(function(t){return t.nextItem}))},m.prototype.getDisplayText=function(){return this.displayText.value||this.value};var p=function(t){function e(e,i,n,s,r){t.call(this,e,i,null,n,s,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getPrevious=function(t){return h(this,-1)},e.prototype.getNext=function(t){return h(this,1)},e}(m),f=function(t){function e(e,i){t.call(this,e,i,!0)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(p),d=function(){this.items=[],this.selectedItem=new r.Subject,this.visibleItemsChanged=new r.Emitter};d.createMonthCollection=function(t,e){for(var i=new d,n=0;n<e.length;n++)i.add(n+1,null,n+1===t).displayText.value=e[n];return i.initialize(t),i},d.createGenerator=function(t,e,i,n){var s=new v(e,i,n);return s.initialize(t),s},d.prototype.initialize=function(t){this.items[0].prevItem=this.items[this.items.length-1],this.items[this.items.length-1].nextItem=this.items[0],this.items.filter((function(e){return e.value===t}))[0].selected.update(!0)},d.prototype.add=function(t,e,i){var n=new m(this,t,e,i,this.items[this.items.length-1]);return this.items.push(n),n};var v=function(t){function e(e,i,n){t.call(this),this.min=e,this.max=i,this.delta=n,this.originItem=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialize=function(t){this.originItem=new f(this,t)},e}(d),b=function(t,e,i,n,s){this.displayTextSubscription=this.displayTextSubscription.bind(this),this.roller=i,this.prevItem=s,this.nextItem=null,this.index=e,this.elements=i.createRollerItemElements(),this.offset=e*n,this.height=n,this.position=0,this.visibleItemCount=i.visibleItemCount,s&&(s.nextItem=this),this.updateDataItem(t),this.selectItem=this.selectItem.bind(this)};function g(t,e){t.innerText=e}function I(t,e,i){var n=i(t);return Math.abs(Math.round(n.position-t.position))===e?[n].concat(I(n,e,i)):[]}function y(t,e,i){0!==t.length&&(t.shift().updateDataItem(e),y(t,i(e),i))}b.prototype.initialize=function(t){var e=this,i=Math.floor(this.visibleItemCount/2);this.elements[1].style.top=(this.index-i)*this.height+"px",t.appendChild(this.elements[1]),this.move(this.offset),this.elements[0].addEventListener("click",(function(t){n.RequestAnimationFrame(e.selectItem)}))},b.prototype.isSelected=function(){return Math.floor(this.visibleItemCount/2)*this.height===Math.round(this.position)},b.prototype.selectItem=function(t){var e=this,i=Math.floor(this.visibleItemCount/2);return this.roller.afterMove(x(r.Subscription.Empty,(function(t){return e.roller.move(t)}),{divisor:this.roller.itemSize.height,startTimestamp:t,endTimestamp:t+300,easing:o,frameCallback:n.RequestAnimationFrame,value:(i-this.index)*this.height-(this.position-this.offset)}))},b.prototype.move=function(t){this.updatePosition(t);var e=this.position-this.offset;this.elements.forEach((function(t){return t.style.transform="matrix(1, 0, 0, 1, 0, "+e+")"}))},b.prototype.updatePosition=function(t){this.position+=t,this.position>this.visibleItemCount*this.height?(this.position-=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.nextItem.dataItem.getPrevious())):this.position<-1*this.height&&(this.position+=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.prevItem.dataItem.getNext()))},b.prototype.updateDataItem=function(t){this.dataItem!==t&&(this.dataItem&&this.dataItem.displayText.unsubscribe(this.displayTextSubscription),this.dataItem=t,this.dataItem.displayText.subscribe(this.displayTextSubscription))},b.prototype.displayTextSubscription=function(t){this.elements.forEach((function(e){return g(e,t)}))},b.prototype.raiseChanges=function(){this.isSelected()&&this.dataItem.selected.update(!0)};var C=function(t,e,i,n,s,r){this.itemCollection=t,this.visibleItemCount=e,this.itemContainers=[],this.itemSize=n,this.caption=s,this.longestVisibleDisplayText=r,this.container=i,this.rollerElement=null,this.rollerContainer=null,this.move=this.move.bind(this),this.afterMove=this.afterMove.bind(this)};function x(t,e,i){return new Promise((function(n,s){function r(){t.unsubscribe(r),s()}t.subscribe(r,!0);var o=0,a=i.frameCallback;a((function s(l){if(l<i.endTimestamp){var u=i.easing((l-i.startTimestamp)/(i.endTimestamp-i.startTimestamp)),c=i.value*u-o;e(c),o+=c,a(s)}else t.unsubscribe(r),e(i.value-o),n()}))}))}function w(t,e,i,n,s,r){var a,l,u,c,h=1,m=i.accelerationTimeFrame||300;function p(t){l=0,u=t,h=1}t.subscribe((function(f){r((function(d){c||(c=!0,p(d),s(new Promise((function(s,a){e.subscribe((function a(u){e.unsubscribe(a),x(t,n,function(t){var e=Math.abs(l%i.divisor);return{value:(i.divisor-e)*Math.sign(l),endTimestamp:t+300,startTimestamp:t,easing:o,frameCallback:r}}(u)).then((function(){c=!1,s()})).catch((function(){e.subscribe(a)})).finally(p)}))})))),n(function(t,e){return(e*=h)>=a&&t-u<=m&&(h=Math.min(2,1.2*h)),l+=e,a=e,u=t,e}(d,f))}))}))}function E(t){return t.value%4==0&&t.value%100!=0||t.value%400==0}function S(t){return 2!==t.value}function T(t){return-1!==[1,3,5,7,8,10,12].indexOf(t.value)}C.prototype.initialize=function(){var t=this;this.initializeRollerElements();for(var e=[this.itemCollection.selectedItem.value];e.length<this.visibleItemCount;)e.splice(0,0,e[0].getPrevious()),e.push(e[e.length-1].getNext());e.push(e[e.length-1].getNext());for(var i=0;i<e.length;i++)this.itemContainers.push(new b(e[i],i,this,this.itemSize.height,this.itemContainers[this.itemContainers.length-1]));this.longestVisibleDisplayText&&g(this.createRollerItemElement("roller-item expander"),this.longestVisibleDisplayText);var a=this.createRollerItemElement("roller-after");this.itemContainers[0].prevItem=this.itemContainers[this.itemContainers.length-1],this.itemContainers[this.itemContainers.length-1].nextItem=this.itemContainers[0];for(var l=0;l<this.itemContainers.length;l++)this.itemContainers[l].initialize(a);this.itemCollection.selectedItem.subscribe((function(){return t.updateVisibleDataItems()}),!0),this.itemCollection.visibleItemsChanged.subscribe((function(){return t.updateVisibleDataItems()}),!0),u(this.rollerElement,this.itemSize.height,o,this.move,this.afterMove),function(t,e,i,s){var o=new r.Emitter,a=new r.Emitter,l=0;t.addEventListener("touchstart",(function(t){l=t.touches[0].clientY}),!1),t.addEventListener("touchend",(function(t){l=0,n.RequestAnimationFrame((function(t){return a.emit(t)}))}),!1),t.addEventListener("touchmove",(function(t){t.preventDefault();var e=t.changedTouches[0].clientY;o.emit(e-l),l=e}),!1),w(o,a,{divisor:e},i,s,n.RequestAnimationFrame)}(this.rollerElement,this.itemSize.height,this.move,this.afterMove),this.rollerContainer.addEventListener("keydown",(function(e){var i=null;e.keyCode===s.Key.Up?i=t.itemCollection.selectedItem.value.getNext():e.keyCode===s.Key.Down&&(i=t.itemCollection.selectedItem.value.getPrevious()),i&&(e.preventDefault(),i.selected.update(!0))}))},C.prototype.initializeRollerElements=function(){var t=this.rollerContainer=document.createElement("A");t.className="roller-container",t.href="javascript:;",t.style.minWidth=this.itemSize.width;var e=document.createElement("SPAN");e.innerText=this.caption,e.className="roller-title",t.appendChild(e);var i=this.rollerElement=document.createElement("SPAN");i.className="roller",t.appendChild(i),this.container&&this.container.appendChild(t)},C.prototype.updateVisibleDataItems=function(){var t=this.itemContainers.filter((function(t){return t.isSelected()}))[0];if(t){var e=I(t,this.itemSize.height,(function(t){return t.prevItem})),i=I(t,this.itemSize.height,(function(t){return t.nextItem})),n=this.itemCollection.selectedItem.value;t.updateDataItem(n),y(e.concat([]),n.getPrevious(),(function(t){return t.getPrevious()})),y(i.concat([]),n.getNext(),(function(t){return t.getNext()}))}},C.prototype.createRollerItemElement=function(t){var e=document.createElement("SPAN");return e.className=t||"roller-item",this.rollerElement.appendChild(e),e},C.prototype.createRollerItemElements=function(){var t=this.createRollerItemElement();return[t,t.cloneNode()]},C.prototype.move=function(t){if(0!==t)for(var e=Math.sign(t),i=this.itemContainers.length-1,n=(-1===e?0:i)+e,s=-1===e?i:0;s!==n;s+=e)this.itemContainers[s].move(t)},C.prototype.afterMove=function(t){var e=this;return t.then((function(){return Promise.resolve(e.itemContainers.forEach((function(t){return t.raiseChanges()})))}))};var j=0,D=1,z=2,M=3,N=4,k=5;function P(t,e,i,n,s,r){var o=t.add(e,i,n);s.length>0&&r.subscribe((function(t){var i=s[R(t[1].value,t[0].value,e)];o.displayText.update(e+" "+i)}))}function R(t,e,i){return new Date(t,e-1,i).getDay()}function _(t){return t&&t.length?" "+t.concat([]).sort((function(t,e){return e.length-t.length}))[0]:""}var A={initializeDateRoller:function(t,e,i,n,s){var r=e.items.filter((function(t){return t.type===D||t.type===z||t.type===j}))[0],o=e.items.filter((function(t){return t.type===M||t.type===N}))[0],a=e.items.filter((function(t){return t.type===k}))[0],l=e.monthNames||[],u=e.dayNames||[];r=void 0!==r?r.value:1,void 0===o?(l=["","","","","","","","","","","",""],o=i):o=o.value;for(var c=d.createGenerator(a=void 0===a?n:a.value,-1,-1,1),h=d.createMonthCollection(o,l),m=h.selectedItem.asTrigger(S),p={29:c.selectedItem.asTrigger(E).or(m),30:m,31:h.selectedItem.asTrigger(T)},f=h.selectedItem.join(c.selectedItem),v=new d,b=1;b<=31;b++)P(v,b,p[b],b===r,u,f);v.initialize(r);var g=document.createDocumentFragment(),I=document.createElement("STYLE");function y(t){return function(e){t(e),s.invokeMethodAsync("UpdateDateTime",[r,o,a])}}return I.type="text/css",I.innerText=".roller { height: 180px; } .roller-item, .roller-after { height: 36px; } .roller-item, .roller-title { color: "+window.getComputedStyle(t).color+" !important; } .roller-after { background-color: "+window.getComputedStyle(t.parentNode.parentNode).backgroundColor+";}",g.appendChild(I),e.items.forEach((function(t){switch(t.type){case j:case z:case D:new C(v,5,g,{width:"",height:36},"Day","25"+_(u)).initialize();break;case N:case M:new C(h,5,g,{width:"",height:36},"Month",_(l)).initialize();break;case k:new C(c,5,g,{width:"",height:36},"Year","0000").initialize()}})),t.appendChild(g),v.selectedItem.subscribe(y((function(t){r=t.value}))),h.selectedItem.subscribe(y((function(t){o=t.value}))),c.selectedItem.subscribe(y((function(t){a=t.value}))),Promise.resolve()}};i.Roller=C,i.RollerItem=m,i.RollerItemCollection=d,i.attachInputSource=w,i.default=A,i.getDayOfWeek=R}),["cjs-chunk-c5286524.js","cjs-dom-utils-c4472fdd.js","cjs-chunk-8bdf5a55.js","cjs-chunk-62a77fef.js"]);
